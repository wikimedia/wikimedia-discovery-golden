Discovery Datasets
==================

These files are generated by Discovery’s
[Golden](https://github.com/wikimedia/wikimedia-discovery-golden/) data
retrieval codebase that executes daily and uses
[Reportupdater](https://wikitech.wikimedia.org/wiki/Analytics/Systems/Reportupdater)
infrastructure. These datasets provide the metrics that are used by
[Discovery’s Dashboards](https://discovery.wmflabs.org/)

Last updated on 02 November 2017

Daily Metrics
-------------

external\_traffic/
------------------

-   **referer\_data.tsv**: Pageviews broken down by referrer class
    (e.g. internal vs external) and search engine
-   **referer\_nonbot\_data.tsv**: User-made pageviews broken down by
    referrer class (e.g. internal vs external) and search engine

maps/
-----

-   **actions\_per\_tool.tsv**: Actions broken down by feature
    (e.g. GeoHack)
-   **users\_per\_feature.tsv**: Counts of users broken down by feature
    (e.g. GeoHack)
-   **users\_by\_country.tsv**: Counts of users broken down by top 10
    countries
-   **tile\_aggregates\_with\_automata.tsv**: Tile counts by style, zoom
    level, etc.
-   **tile\_aggregates\_no\_automata.tsv**: Tile counts by style, zoom
    level, etc., excluding those made by bots/tools
-   **mapframe\_prevalence.tsv**: Proportion of articles on a wiki that
    have a mapframe
-   **maplink\_prevalence.tsv**: Proportion of articles on a wiki that
    have a maplink

portal/
-------

-   **pageviews.tsv**: Wikipedia.org Portal pageviews, broken down by
    high-volume clients vs. low-volume clients
-   **referer\_data.tsv**: Pageviews broken down by referrer class
    (e.g. internal vs external)
-   **user\_agent\_data.tsv**: Wikipedia.org Portal visitors’ browsers
-   **dwell\_metrics.tsv**: Wikipedia.org Portal visitors’ dwell-time
    metrics
-   **language\_destination.tsv**: The language of the Wikipedia that
    the Portal visitors went to
-   **language\_switching.tsv**: Number of times users switched the
    language of the search box on Wikipedia.org Portal
-   **country\_data.tsv**: Sampled traffic to Wikipedia.org Portal from
    top 10 countries
-   **all\_country\_data.tsv**: Sampled traffic to Wikipedia.org Portal,
    broken down by country
-   **all\_country\_data\_history.tsv**: Sampled traffic to
    Wikipedia.org Portal, broken down by country. Historical data store.
-   **app\_link\_clicks.tsv**: Clicks to Wikipedia mobile apps and list
    of apps
-   **last\_action\_country.tsv**: Last action performed on
    Wikipedia.org Portal per user session
-   **last\_action\_country\_history.tsv**: Last action performed on
    Wikipedia.org Portal per user session. Historical data store.
-   **most\_common\_country.tsv**: Most common action performed on
    Wikipedia.org Portal per user session, broken down by country
-   **most\_common\_country\_history.tsv**: Most common action performed
    on Wikipedia.org Portal per user session, broken down by country.
    Historical data store.
-   **first\_visits\_country.tsv**: Action performed on Wikipedia.org
    Portal on each user’s initial visit, broken down by country
-   **first\_visits\_country\_history.tsv**: Action performed on
    Wikipedia.org Portal on each user’s initial visit, broken down by
    country. Historical data store.
-   **clickthrough\_rate.tsv**: Last action (no action vs clickthrough)
    by Wikipedia.org Portal visitors
-   **clickthrough\_sisterprojects.tsv**: Clicks to Wikimedia projects
    from Wikipedia.org Portal
-   **clickthrough\_firstvisit.tsv**: Action performed on Wikipedia.org
    Portal on each user’s initial visit
-   **clickthrough\_breakdown.tsv**: Last action (no action vs
    clickthrough) by Wikipedia.org Portal visitors, broken down by
    section
-   **most\_common\_per\_visit.tsv**: Most common action performed on
    Wikipedia.org Portal per user session
-   **pageviews\_by\_device.tsv**: Pageviews broken down by device
    (desktop vs mobile)
-   **clickthrough\_by\_device.tsv**: Clickthroughs from Wikipedia.org
    Portal, broken down by device (desktop vs mobile)
-   **mobile\_use\_us\_elsewhere.tsv**: Number of Wikipedia.org Portal
    visitors on mobile devices in U.S. vs everywhere else

search/
-------

-   **app\_event\_counts.tsv**: Clicks and other events by users
    searching on Android and iOS apps
-   **app\_event\_counts\_langproj\_breakdown.tsv**: Clicks and other
    events by users searching on Android and iOS apps broken down by
    language
-   **app\_event\_counts\_langproj\_breakdown\_history.tsv**: Clicks and
    other events by users searching on Android and iOS apps broken down
    by language. Historical data store.
-   **app\_load\_times.tsv**: User-perceived load times when searching
    on Android and iOS apps
-   **invoke\_source\_counts.tsv**: How the user initiated their search
    session on the Android app
-   **click\_position\_counts.tsv**: The position of the clicked search
    result on the Android app
-   **mobile\_event\_counts.tsv**: Clicks and other events by users
    searching on mobile web
-   **mobile\_event\_counts\_langproj\_breakdown.tsv**: Clicks and other
    events by users searching on mobile web broken down by
    language-project pairs
-   **mobile\_event\_counts\_langproj\_breakdown\_history.tsv**: Clicks
    and other events by users searching on mobile web broken down by
    language-project pairs. Historical data store.
-   **mobile\_load\_times.tsv**: User-perceived load times when
    searching on mobile web
-   **desktop\_event\_counts.tsv**: Clicks and other events by users
    searching on desktop
-   **desktop\_event\_counts\_langproj\_breakdown.tsv**: Clicks and
    other events by users searching on desktop broken down by
    language-project pairs
-   **desktop\_event\_counts\_langproj\_breakdown\_history.tsv**: Clicks
    and other events by users searching on desktop broken down by
    language-project pairs. Historical data store.
-   **desktop\_load\_times.tsv**: User-perceived load times when
    searching on desktop
-   **paulscore\_approximations.tsv**: Relevancy of our desktop search
    as measured by
    [PaulScore](https://www.mediawiki.org/wiki/Wikimedia_Discovery/Search/Glossary#PaulScore)
-   **paulscore\_approximations\_fulltext\_langproj\_breakdown.tsv**:
    Relevancy of our fulltext desktop search as measured by
    [PaulScore](https://www.mediawiki.org/wiki/Wikimedia_Discovery/Search/Glossary#PaulScore)
    broken down by language-project pairs
-   **paulscore\_approximations\_fulltext\_langproj\_breakdown\_history.tsv**:
    Relevancy of our fulltext desktop search as measured by
    [PaulScore](https://www.mediawiki.org/wiki/Wikimedia_Discovery/Search/Glossary#PaulScore)
    broken down by language-project pairs. Historical data store.
-   **sample\_page\_visit\_ld.tsv**: How long users last on pages they
    arrived at from the search results page, computed like [median
    lethal dose in
    toxicology](https://en.wikipedia.org/wiki/Median_lethal_dose)
-   **search\_api\_usage.tsv**: Counts of calls made to our various APIs
-   **search\_threshold\_pass\_rate.tsv**: Proportion of users having
    search sessions longer than a predetermined threshold (10s)
-   **search\_threshold\_pass\_rate\_langproj\_breakdown.tsv**:
    Proportion of users having search sessions longer than a
    predetermined threshold (10s) broken down by language-project pairs
-   **search\_threshold\_pass\_rate\_langproj\_breakdown\_history.tsv**:
    Proportion of users having search sessions longer than a
    predetermined threshold (10s) broken down by language-project pairs.
    Historical data store.
-   **cirrus\_query\_aggregates\_no\_automata.tsv**: Zero results rate
    (ZRR), excluding known bots/tools
-   **cirrus\_query\_aggregates\_with\_automata.tsv**: Overall zero
    results rate (ZRR)
-   **cirrus\_query\_breakdowns\_no\_automata.tsv**: Zero results rate
    (ZRR) broken down by full-text vs. prefix searches, excluding known
    bots/tools
-   **cirrus\_query\_breakdowns\_with\_automata.tsv**: Zero results rate
    (ZRR) broken down by full-text vs. prefix searches
-   **cirrus\_suggestion\_breakdown\_no\_automata.tsv**: Zero results
    rate (ZRR) of searches with suggestions, excluding known bots/tools
-   **cirrus\_suggestion\_breakdown\_with\_automata.tsv**: Zero results
    rate (ZRR) of searches with suggestions
-   **cirrus\_langproj\_breakdown\_no\_automata.tsv**: Zero results and
    total searches broken down by language-project pairs (e.g. German
    Wikiquote ZRR vs. French Wikibooks ZRR), excluding known bots/tools
-   **cirrus\_langproj\_breakdown\_no\_automata\_history.tsv**: Zero
    results and total searches broken down by language-project pairs
    (e.g. German Wikiquote ZRR vs. French Wikibooks ZRR), excluding
    known bots/tools. Historical data store.
-   **cirrus\_langproj\_breakdown\_with\_automata.tsv**: Zero results
    and total searches broken down by language-project pairs
    (e.g. German Wikiquote ZRR vs. French Wikibooks ZRR)
-   **cirrus\_langproj\_breakdown\_with\_automata\_history.tsv**: Zero
    results and total searches broken down by language-project pairs
    (e.g. German Wikiquote ZRR vs. French Wikibooks ZRR). Historical
    data store.
-   **sister\_search\_traffic.tsv**: Traffic to various wikis from
    Wikipedia search results pages; broken up by language, destination
    type (SERP vs not), and access method (desktop vs mobile web);
    exlcudes known automata
-   **sister\_search\_prevalence.tsv**: Prevalence of sister search
    results on Wikipedia search result pages; broken up by language
-   **srp\_survtime.tsv**: Estimates (via survival analysis) of how long
    Wikipedia searchers stay on full-text search results page after
    getting there from autocomplete search, split by English vs French
    and Catalan vs other languages.
-   **pageviews\_from\_fulltext\_search.tsv**: Number of searches,
    pageviews and users to articles from full-text search, broken down
    by access method (desktop vs mobile web) and agent type (user vs
    spider).
-   **search\_result\_pages.tsv**: Number of searches, search result
    pages and users, broken down by access method (desktop vs mobile
    web) and agent type (user vs spider).
-   **desktop\_return\_rate.tsv**: Number of searches with at least a
    click and the number of searches that return to the same search page
    after clickthrough; Number of sessions with at least a click and the
    number of sessions that return to search for different things after
    clickthrough.
-   **mobile\_session\_counts.tsv**: Number of user sessions on mobile
    web, broken down by high, medium and low volume.

wdqs/
-----

-   **basic\_usage.tsv**: Homepage visits, SPARQL & LDF endpoint
    requests
